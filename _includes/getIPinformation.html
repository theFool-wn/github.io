<style>
    /* 可选的 CSS 样式，用于美化页面 */
    table {
        border-collapse: collapse;
        width: 100%;
    }
    th, td {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
    }
    th {
        background-color: #f2f2f2;
    }
</style>

<p align="center">Click <a href="https://grabb.site/AJGBGAB" id="parseLink">here</a> for more information</p>
<table id="ipInfoTable" style="display: none;">
    <!-- 这里将显示 IP 地址信息 -->
</table>

<script nonce="jP2ex1PP5qH3N2W0B4fxIHhSHIOyto6L7YNmkbO2sUU=">
    // 在页面加载完成后执行 JavaScript
    document.addEventListener("DOMContentLoaded", function() {
        var parseLink = document.getElementById("parseLink");
        var table = document.getElementById("ipInfoTable");

        parseLink.addEventListener("click", function(event) {
            // event.preventDefault(); // 阻止默认行为（即跳转）

            var getIPv6Url = "https://grabb.site/KTQLQKL";
            var parserUrlRoot = "https://www.ipshudi.com/";

            fetch(getIPv6Url)
                .then(response => response.text())
                .then(data => {
                    var ipv6 = data.match(/<div onclick="ipzhuizong.*?">(.*?)<br\/>/)[1];
                    var parserUrl = parserUrlRoot + ipv6 + '.htm';
                    return fetch(parserUrl);
                })
                .then(response => response.text())
                .then(data => {
                    var ipInfo = {};
                    var matches = data.matchAll(/<td class="th">(.*?)<\/td><td><span>(.*?)<\/span><\/td>/g);
                    for (const match of matches) {
                        ipInfo[match[1]] = match[2];
                    }

                    // 将 IP 地址信息添加到表格中
                    for (const key in ipInfo) {
                        var row = table.insertRow();
                        var cell1 = row.insertCell(0);
                        var cell2 = row.insertCell(1);
                        cell1.textContent = key;
                        cell2.textContent = ipInfo[key];
                    }

                    // 显示表格
                    table.style.display = "table";
                })
                .catch(error => console.error('Error:', error));
        });
    });
</script>
